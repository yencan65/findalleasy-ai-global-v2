<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Feeds · FindEasy</title><style>
body{font-family:Inter,system-ui,Arial;margin:0;background:#0f1220;color:#e8eaf2}
.wrap{max-width:1000px;margin:0 auto;padding:24px}.card{background:#141a2e;border:1px solid #222845;border-radius:16px;padding:16px;margin-bottom:16px}
.row{display:flex;gap:8px;flex-wrap:wrap}input{padding:8px 10px;border-radius:8px;border:1px solid #222845;background:#0f1220;color:#e8eaf2}
button{padding:10px 12px;border-radius:10px;border:none;background:#6ee7ff;color:#0b1024;font-weight:800;cursor:pointer}
table{width:100%;border-collapse:collapse}th,td{border-bottom:1px solid #222845;padding:8px;font-size:14px}
</style></head><body><div class="wrap">
<h2>Feed Bağlantıları</h2>
<div class="card">
  <div class="row">
    <input id="token" placeholder="ADMIN_TOKEN">
    <input id="baseUrl" placeholder="Mağaza URL (Shopify/Woo)">
    <select id="type">
      <option value="shopify">Shopify</option>
      <option value="woocommerce">WooCommerce</option>
      <option value="amazon_affiliate">Amazon Affiliate</option>
      <option value="booking_affiliate">Booking Affiliate</option>
    </select>
    <button onclick="add()">Ekle</button>
    <button onclick="pull()">Tümünü Çek</button>
  </div>
</div>
<div class="card">
  <table><thead><tr><th>ID</th><th>Tür</th><th>URL/Tag</th><th>Aktif</th><th>Son Çekim</th></tr></thead><tbody id="flist"></tbody></table>
</div>
</div>
<script>
let ADMIN_TOKEN = localStorage.getItem('ADMIN_TOKEN')||''; token.value=ADMIN_TOKEN;
function saveToken(){ ADMIN_TOKEN=token.value; localStorage.setItem('ADMIN_TOKEN',ADMIN_TOKEN); }
async function authed(p,opts={}){ opts.headers=Object.assign({},opts.headers||{}, {'X-Admin-Token':ADMIN_TOKEN,'Content-Type':'application/json'}); const r=await fetch(p,opts); if(r.status===401){alert('Yetkisiz'); throw new Error('unauth');} return r; }
async function load(){ const feeds = await (await authed('/api/admin/feeds')).json(); render(feeds); }
function render(feeds){ flist.innerHTML = feeds.map(f=>`<tr><td>${f.id}</td><td>${f.type}</td><td>${f.baseUrl||f.tag||f.partnerId||''}</td><td>${f.active?'Evet':'Hayır'}</td><td>${f.lastPull||'-'}</td></tr>`).join(''); }
async function add(){ saveToken(); const body = { type: type.value, baseUrl: baseUrl.value }; await authed('/api/admin/feeds/connect',{method:'POST',body:JSON.stringify(body)}); await load(); }
async function pull(){ saveToken(); await authed('/api/admin/feeds/pull',{method:'POST'}); alert('Çekildi (demo/mock)'); await load(); }
load().catch(()=>{});
</script></body></html>