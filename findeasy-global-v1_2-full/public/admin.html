<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Â· FindEasy</title><style>
body{font-family:Inter,system-ui,Arial;margin:0;background:#0f1220;color:#e8eaf2}
.wrap{max-width:1100px;margin:0 auto;padding:24px}.card{background:#141a2e;border:1px solid #222845;border-radius:16px;padding:16px;margin-bottom:16px}
.row{display:flex;gap:8px;flex-wrap:wrap}input{padding:8px 10px;border-radius:8px;border:1px solid #222845;background:#0f1220;color:#e8eaf2}
button{padding:10px 12px;border-radius:10px;border:none;background:#6ee7ff;color:#0b1024;font-weight:800;cursor:pointer}
table{width:100%;border-collapse:collapse}th,td{border-bottom:1px solid #222845;padding:8px;font-size:14px}
</style></head><body><div class="wrap">
<h2>Admin Panel</h2>
<div class="card"><div class="row"><input id="token" placeholder="ADMIN_TOKEN"><button onclick="saveToken()">Login</button></div></div>
<div class="card"><h3>Settings</h3>
  <div class="row">
    <label><input type="checkbox" id="dyn"> Dynamic Pricing</label>
    <input id="defc" type="number" step="0.01" placeholder="Default Commission (0.12)">
    <input id="minc" type="number" step="0.01" placeholder="Min Commission (0.03)">
    <button onclick="saveSettings()">Save</button>
  </div>
</div>
<div class="card"><h3>Products</h3><table><thead><tr><th>Title</th><th>Price</th><th>Seller</th></tr></thead><tbody id="plist"></tbody></table></div>
</div>
<script>
let ADMIN_TOKEN = localStorage.getItem('ADMIN_TOKEN')||''; token.value=ADMIN_TOKEN;
function saveToken(){ ADMIN_TOKEN=token.value; localStorage.setItem('ADMIN_TOKEN',ADMIN_TOKEN); load(); }
async function authed(p,opts={}){ opts.headers=Object.assign({},opts.headers||{}, {'X-Admin-Token':ADMIN_TOKEN,'Content-Type':'application/json'}); const r=await fetch(p,opts); if(r.status===401){alert('Unauthorized'); throw new Error('unauth');} return r; }
async function load(){
  const s = await (await authed('/api/admin/settings')).json();
  dyn.checked = !!s.dynamic_pricing_enabled; defc.value=s.default_commission; minc.value=s.min_commission;
  const prods = await (await fetch('/api/products')).json();
  plist.innerHTML = prods.map(p=>`<tr><td>${p.title}</td><td>${p.price}</td><td>${p.seller}</td></tr>`).join('');
}
async function saveSettings(){
  const body = { dynamic_pricing_enabled: dyn.checked, default_commission: Number(defc.value||0.12), min_commission: Number(minc.value||0.03) };
  await authed('/api/admin/settings',{method:'POST',body:JSON.stringify(body)});
  alert('Saved');
}
load().catch(()=>{});
</script></body></html>